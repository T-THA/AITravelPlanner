# Task 2.1 快速测试指南

## 🚀 快速开始

### 1. 启动开发服务器

```powershell
cd f:/graduate/AITravelPlanner/frontend
npm run dev
```

访问: http://localhost:5173

## ✅ 测试清单

### 测试 1: 注册功能

**步骤**:
1. 访问 http://localhost:5173/register
2. 输入邮箱: `test@example.com`
3. 输入密码: `Test123456` (需包含大小写字母和数字)
4. 确认密码: `Test123456`
5. 点击"注册"按钮

**预期结果**:
- ✅ 显示成功消息："注册成功！请检查您的邮箱以验证账号。"
- ✅ 2秒后自动跳转到登录页面
- ✅ 邮箱收到验证邮件（检查 Supabase 邮件配置）

**测试密码验证**:
- ❌ 密码少于6位: "密码长度至少为6位！"
- ❌ 密码不包含大小写和数字: "密码必须包含大小写字母和数字！"
- ❌ 两次密码不一致: "两次输入的密码不一致！"

---

### 测试 2: 登录功能

**步骤**:
1. 访问 http://localhost:5173/login
2. 输入注册的邮箱
3. 输入密码
4. 勾选"记住我"
5. 点击"登录"按钮

**预期结果**:
- ✅ 登录成功，显示："登录成功！"
- ✅ 自动跳转到 Dashboard 页面
- ✅ 刷新页面仍保持登录状态

**测试错误提示**:
- ❌ 邮箱未验证: "请先验证您的邮箱！请检查邮件中的验证链接。"
- ❌ 密码错误: "邮箱或密码错误，请重试"
- ❌ 邮箱格式错误: "请输入有效的邮箱地址！"

---

### 测试 3: 密码找回功能

**步骤**:
1. 访问 http://localhost:5173/login
2. 点击"忘记密码？"链接
3. 输入注册的邮箱
4. 点击"发送重置链接"

**预期结果**:
- ✅ 显示成功页面
- ✅ 邮箱收到密码重置邮件
- ✅ 可以点击"重新发送"按钮
- ✅ 可以点击"返回登录"按钮

---

### 测试 4: 密码重置功能

**步骤**:
1. 打开密码重置邮件
2. 点击邮件中的重置链接
3. 自动跳转到重置密码页面
4. 输入新密码: `NewTest123456`
5. 确认新密码: `NewTest123456`
6. 点击"重置密码"

**预期结果**:
- ✅ 显示成功页面："密码重置成功"
- ✅ 2秒后自动跳转到登录页面
- ✅ 使用新密码可以成功登录

**测试密码强度**:
- ❌ 弱密码: 显示"密码必须包含大小写字母和数字！"

---

### 测试 5: 路由保护

**步骤**:
1. 退出登录（如果已登录）
2. 直接访问 http://localhost:5173/dashboard

**预期结果**:
- ✅ 自动重定向到登录页面 (`/login`)
- ✅ 登录成功后自动返回 Dashboard 页面

**测试其他受保护路由**:
- http://localhost:5173/voice-test
- http://localhost:5173/map-test
- http://localhost:5173/dashscope-test

所有都应该重定向到登录页面。

---

### 测试 6: 会话持久化

**步骤**:
1. 登录账号（勾选"记住我"）
2. 刷新页面（F5）
3. 关闭浏览器
4. 重新打开浏览器，访问 http://localhost:5173/dashboard

**预期结果**:
- ✅ 刷新页面后仍保持登录状态
- ✅ 重新打开浏览器后仍保持登录状态
- ✅ 可以正常访问受保护页面

---

### 测试 7: 页面 UI 检查

**登录页面检查**:
- ✅ 紫色渐变背景
- ✅ 圆角白色卡片
- ✅ 邮箱输入框带邮件图标
- ✅ 密码输入框带锁图标
- ✅ "记住我"复选框
- ✅ "忘记密码？"链接
- ✅ "立即注册"链接
- ✅ 登录按钮大且醒目

**注册页面检查**:
- ✅ 与登录页面风格统一
- ✅ 密码强度提示（可选功能）
- ✅ "立即登录"链接
- ✅ 表单验证实时反馈

**密码找回页面检查**:
- ✅ 清晰的说明文字
- ✅ 成功页面友好提示
- ✅ "返回登录"按钮

**密码重置页面检查**:
- ✅ 令牌验证错误提示
- ✅ 密码强度验证
- ✅ 成功页面提示

---

### 测试 8: 移动端适配

**使用浏览器开发工具测试**:
1. 打开 Chrome DevTools (F12)
2. 切换到设备模拟模式 (Ctrl+Shift+M)
3. 测试以下设备:
   - iPhone SE (375x667)
   - iPhone 12 Pro (390x844)
   - iPad (768x1024)

**预期结果**:
- ✅ 所有页面在移动端正常显示
- ✅ 按钮和输入框大小适中
- ✅ 文字清晰可读
- ✅ 无横向滚动条

---

## 🐛 常见问题排查

### 问题 1: 收不到验证邮件

**可能原因**:
- Supabase 邮件服务未配置
- 邮箱在垃圾邮件文件夹中
- 免费版 Supabase 邮件发送有限制

**解决方案**:
1. 检查 Supabase 控制台的邮件设置
2. 配置 SMTP 邮件服务
3. 检查垃圾邮件文件夹

### 问题 2: 登录后无法跳转

**可能原因**:
- 路由配置错误
- Auth Store 状态未更新

**解决方案**:
1. 检查浏览器控制台错误
2. 清除浏览器缓存和 localStorage
3. 检查 `.env` 文件中的 Supabase 配置

### 问题 3: 密码重置链接无效

**可能原因**:
- 链接已过期（24小时）
- Token 格式错误

**解决方案**:
1. 重新申请密码重置
2. 检查 URL 中的 `access_token` 参数
3. 确保 `redirectTo` 配置正确

---

## 📊 测试结果记录

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 注册功能 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 登录功能 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 密码找回 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 密码重置 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 路由保护 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 会话持久化 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| UI 检查 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 移动端适配 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |

---

## 🎉 测试完成

完成所有测试后：
1. 记录测试结果
2. 报告发现的问题
3. 确认所有核心功能正常工作
4. 准备进入下一阶段开发

---

**文档版本**: v1.0  
**创建时间**: 2025年11月2日
